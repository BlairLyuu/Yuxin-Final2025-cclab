<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P5.js Seen Tide till - Time</title>
    
    <!-- [第一步：引入 p5.js 库] -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    
    <!-- [自定义修改：引入 Google Fonts] -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Commissioner:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        /* [自定义修改：引入繁体字体] */
        @font-face {
            font-family: 'SourceHanSansTW';
            src: url('font/Source Han Sans HC VF ExtraLight.ttf') format('truetype');
            font-weight: 200;
            font-style: normal;
        }
        
        /* [全局设置 - 保持不变] */
        :root {
            --bg-color: #fcfcfc;
            --text-main: #1a1a1a;
            --text-sub: #8c8c8c;
            --main-font: 'Helvetica Neue', Arial, sans-serif;
            --spacing-section: 160px;
            --glass-bg: rgba(20, 20, 20, 0.85); 
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body { 
            /* [自定义修改：背景颜色] 如果没有背景图，显示此颜色 */
            background-color: var(--bg-color); 

            /* =================================================================
               [自定义修改：全局背景图片]
               想要把整个网页背景换成图片？
               请取消下面 5 行代码的注释 (删除每行开头的斜杠和星号)，并替换 url
               ================================================================= */
            
            /* 1. 图片链接 (本地路径 'assets/bg.jpg' 或 网络链接) */
            /* background-image: url('https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2564&auto=format&fit=crop'); */
            
            /* 2. 让图片铺满整个屏幕 */
            /* background-size: cover; */
            
            /* 3. 图片居中显示 */
            /* background-position: center; */
            
            /* 4. 防止图片重复平铺 */
            /* background-repeat: no-repeat; */
            
            /* 5. [可选] 背景固定不动，只有内容滚动 (视差感) */
            /* background-attachment: fixed; */


            font-family: var(--main-font); 
            color: var(--text-main); 
            scroll-behavior: smooth; 
        }
        
        a { text-decoration: none; color: inherit; transition: opacity 0.3s; }
        a:hover { opacity: 0.7; }

        /* [Header 样式 - 保持不变] */
        header { position: fixed; top: 0; left: 0; width: 100%; padding: 20px 5vw; display: flex; justify-content: space-between; align-items: center; z-index: 1000; mix-blend-mode: difference; color: white; opacity: 0.9; }
        .logo { 
            font-weight: 200; 
            font-size: 24px; 
            letter-spacing: 1px; 
            background: transparent; 
            display: block; 
            /* [自定义修改：Logo 字体 - 使用繁体字体] */
            font-family: 'SourceHanSansTW', 'Commissioner', sans-serif;
        }
        .nav { display: flex; gap: 30px; align-items: center; transform: scale(0.9); transform-origin: right center; }
        .nav-item-wrapper { position: relative; height: 40px; display: flex; align-items: center; }
        .nav-link { font-size: 14px; font-weight: 500; letter-spacing: 0.5px; color: rgba(255,255,255,0.8); transition: opacity 0.3s ease; position: relative; padding: 0; background: transparent !important; border: none !important; }
        .nav-link:hover, .nav-link.active { color: #fff; opacity: 1; }
        .nav-link::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0%; height: 1px; background: #fff; transition: width 0.3s ease; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .dropdown { position: absolute; top: 100%; left: 50%; transform: translateX(-50%) translateY(10px); padding-top: 8px; opacity: 0; visibility: hidden; transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
        .nav-item-wrapper:hover .dropdown { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }
        .dropdown-menu { background: var(--glass-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); padding: 0; min-width: 70px; border: 1px solid var(--glass-border); border-radius: 0; display: flex; flex-direction: column; box-shadow: 0 20px 50px rgba(0,0,0,0.5); mix-blend-mode: normal; }
        .dropdown-item { font-size: 9px; text-transform: uppercase; letter-spacing: 1px; color: rgba(255,255,255,0.6); padding: 10px 20px; border-bottom: 1px solid rgba(255,255,255,0.05); transition: all 0.2s; border-radius: 0; }
        .dropdown-item:last-child { border-bottom: none; }
        .dropdown-item:hover { color: #fff; background: rgba(255,255,255,0.1); padding-left: 24px; }

        /* [页面特定] */
        .project-hero { padding: 180px 5vw 80px 5vw; max-width: 100vw; }
        .project-header-grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 20px; margin-bottom: 80px; align-items: flex-end; }
        .project-title { grid-column: 1 / span 8; font-size: 64px; font-weight: normal; letter-spacing: -1.5px; line-height: 1.1; }
        .project-meta { grid-column: 9 / span 4; display: flex; flex-direction: column; gap: 12px; font-size: 13px; color: var(--text-sub); border-top: 1px solid #e6e6e6; padding-top: 16px; }
        .meta-row { display: flex; justify-content: space-between; }
        
        /* [关键修改] P5 容器样式 */
        .hero-image-wrapper { 
            width: 100%; 
            height: 80vh; 
            
            /* [自定义修改 1：P5 背景图片已移除，使用 p5.js 画布背景] */
            /* background-image: url('https://images.unsplash.com/photo-1518640467707-6811f4a6ab73?q=80&w=2080&auto=format&fit=crop'); */
            /* background-size: cover; */
            /* background-position: center; */
            
            overflow: hidden; 
            position: relative; 
            background-color: #000; /* 黑色背景，与 p5.js 背景一致 */
        }
        
        canvas { display: block; }

        .content-container { padding: 0 5vw; margin-bottom: var(--spacing-section); }
        .intro-text-section { display: grid; grid-template-columns: repeat(12, 1fr); margin-top: 120px; margin-bottom: 160px; }
        .intro-body { grid-column: 5 / span 6; font-size: 18px; line-height: 1.8; color: #333; }
        .visual-gallery { display: flex; flex-direction: column; gap: 120px; }
        .layout-grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }

        /* Tide 图像容器 - 竖版 3:4 比例 */
        .work-img-wrapper { 
            width: 60%;              /* 缩小到原来的 0.6 */
            margin: 0 auto;          /* 水平居中 */
            background-color: #222; 
            aspect-ratio: 3 / 4; /* 宽:高 = 3:4 竖版 */
            overflow: hidden;
        }
        .work-img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            object-position: center; 
            transition: 0.8s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .caption { margin-top: 16px; font-size: 12px; color: var(--text-sub); letter-spacing: 0.5px; }
        .next-project-section { border-top: 1px solid #e6e6e6; padding: 100px 5vw; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: background-color 0.4s; }
        .next-project-section:hover { background-color: #f9f9f9; }
        .next-label { font-size: 12px; color: var(--text-sub); text-transform: uppercase; margin-bottom: 10px; }
        .next-title { font-size: 32px; font-weight: bold; }
        .arrow-icon { font-size: 32px; transition: transform 0.3s; }
        .next-project-section:hover .arrow-icon { transform: translateX(10px); }
        .fade-up { opacity: 0; transform: translateY(40px); transition: all 0.8s ease; }
        .is-visible { opacity: 1; transform: translateY(0); }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="logo">屿&nbsp;&nbsp;&nbsp;&nbsp;Lyuuxina</a>
        <nav class="nav">
            <div class="nav-item-wrapper"><a href="index.html" class="nav-link">Home</a></div>
            <div class="nav-item-wrapper">
                <a href="index.html" class="nav-link active">Work</a>
                <div class="dropdown">
                    <div class="dropdown-menu">
                        <a href="WDindex .html" class="dropdown-item">Design</a>
                        <a href="WISindex.html" class="dropdown-item">Installation</a>
                        <a href="Windex.html" class="dropdown-item">Digital Art</a>
                        <a href="illustration.html" class="dropdown-item">Illustration</a>
                    </div>
                </div>
            </div>
            <div class="nav-item-wrapper">
                <a href="Aindex.html" class="nav-link">About</a>
                <div class="dropdown">
                    <div class="dropdown-menu">
                        <a href="Aindex.html#bio" class="dropdown-item">Biography</a>
                        <a href="Aindex.html#education" class="dropdown-item">Education</a>
                        <a href="Aindex.html#experience" class="dropdown-item">Experience</a>
                        <a href="Aindex.html#award" class="dropdown-item">Award</a>
                    </div>
                </div>
            </div>
            <!-- 从 Digital Art 页面跳转到 Contact（Cindex.html） -->
            <div class="nav-item-wrapper"><a href="Cindex.html" class="nav-link">Contact</a></div>
        </nav>
    </header>

    <main>
        <section class="project-hero">
            <div class="project-header-grid fade-up">
                <h1 class="project-title">Seen Tide till<br>Time</h1>
                <div class="project-meta">
                    <div class="meta-row"><span>Year</span><span>2025</span></div>
                    <div class="meta-row"><span>Category</span><span>Digital Art/ Code</span></div>
                    <div class="meta-row"><span>Library</span><span>ccLab. Assignment 03</span></div>
                </div>
            </div>
            
            <!-- [第二步：创建容器] -->
            <div id="p5-hero-container" class="hero-image-wrapper fade-up"></div>
        </section>

        <section class="content-container">
            <div class="intro-text-section fade-up">
                <div class="intro-body">
                    <p>Above is a live p5.js sketch embedded directly into the hero section. Move your mouse to interact with the clock.</p>
                </div>
            </div>
            
            <!-- [可选：在网格中插入另一个小游戏] -->
            <div class="visual-gallery">
                <div class="layout-grid-2 fade-up">
                    <div>
                        <div class="work-img-wrapper">
                            <img src="image/tide1.png" alt="Figure 01" class="work-img">
                        </div>
                        <div class="caption">Figure 01. Tide 1</div>
                    </div>
                    <div>
                        <div class="work-img-wrapper">
                            <img src="image/tide2.png" alt="Figure 02" class="work-img">
                        </div>
                        <div class="caption">Figure 02. Tide 2</div>
                    </div>
                </div>
            </div>
        </section>

        <a href="Windex2.html" class="next-project-section">
            <div>
                <div class="next-label">Next Project</div>
                <div class="next-title">Design Your Character</div>
        
            </div>
            <div class="arrow-icon">→</div>
        </a>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('is-visible') });
            }, { threshold: 0.1 });
            document.querySelectorAll('.fade-up').forEach(el => observer.observe(el));
        });

        // [第三步：编写 p5.js 代码 (实例模式)]
        const heroSketch = (p) => {
            let secondsRadius;
            let clockDiameterBase;

            p.setup = () => {
                const container = document.getElementById('p5-hero-container');
                const w = container.offsetWidth;
                const h = container.offsetHeight;
                const canvas = p.createCanvas(w, h);
                canvas.parent('p5-hero-container');
                
                p.angleMode(p.DEGREES);

                const baseR = p.min(p.width, p.height) / 2;
                secondsRadius = baseR * 0.71;
                clockDiameterBase = baseR * 1.7;
            };

            p.draw = () => {
                p.background(0); 

                // 交互
                const sizeFactor = p.map(p.mouseY, 0, p.height, 1.25, 0.6, true); 
                const dialD = clockDiameterBase * sizeFactor;
                const radius = dialD / 1.7;
                secondsRadius = radius * 0.71;

                // 渐变范围控制
                const spread = p.map(p.mouseX, 0, p.width, 0.1, 1.9, true);

                p.translate(p.width / 2, p.height / 2);

                // 表盘
                drawRadialBWGradient(p, dialD / 2, spread);

                // 秒针角度
                const sec = p.second();
                const secondAngle = p.map(sec, 0, 60, 0, 360);

                drawSecondTicks(p, sec);

                // 秒针
                p.stroke(255);
                p.strokeWeight(2);
                p.push();
                p.rotate(secondAngle);
                p.line(0, 0, 0, -secondsRadius);
                p.pop();
            };

            p.windowResized = () => {
                const container = document.getElementById('p5-hero-container');
                p.resizeCanvas(container.offsetWidth, container.offsetHeight);
                
                // 重新计算尺寸
                const baseR = p.min(p.width, p.height) / 2;
                secondsRadius = baseR * 0.71;
                clockDiameterBase = baseR * 1.7;
            };

            // 同心圆
            function drawRadialBWGradient(p, rMax, spread) {
                p.noStroke();
                const steps = 120; 
                const colBlack = p.color(0);
                const colWhite = p.color(255);

                for (let i = 0; i <= steps; i++) {
                    // 从中心向外
                    const t = i / steps;

                    // 先把 t 归一化再用平滑函数软化
                    const u = p.constrain(t / spread, 0, 1);
                    const soft = (1 - p.cos(u * 180)) / 2;

                    const c = p.lerpColor(colBlack, colWhite, soft);
                    p.fill(c);

                    const r = p.lerp(rMax, 0, t); 
                    p.ellipse(0, 0, r * 2, r * 2);
                }
            }

            // 刻度点
            function drawSecondTicks(p, sec) {
                p.noStroke();
                const maxR = 12;
                const minR = 2;
                const colBlack = p.color(0);
                const colWhite = p.color(255);

                for (let t = 0; t < 60; t++) {
                    const ang = t * 6;
                    const x = secondsRadius * p.sin(ang);
                    const y = -secondsRadius * p.cos(ang);

                    const raw = p.abs(t - sec);
                    const cycDist = p.min(raw, 60 - raw); // 0..30
                    const ease = (p.cos((cycDist / 30) * 180) + 1) / 2; 

                    const r = p.lerp(minR, maxR, ease);
                    const c = p.lerpColor(colBlack, colWhite, ease);
                    p.fill(c);
                    p.ellipse(x, y, r, r);
                }
            }
        };

        new p5(heroSketch);

    </script>
</body>
</html>